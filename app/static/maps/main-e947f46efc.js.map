{"version":3,"sources":["app/templates/employeeTemplates.js","app/js/app.module.js","app/js/app.config.js","app/js/services/employeeData.js","app/js/department/departmentList.module.js","app/js/department/departmentList.component.js","app/js/employee/employee.module.js","app/js/employee/employee.component.js","app/js/employee/employeeList.module.js","app/js/employee/employeeList.component.js"],"names":["app","angular","module","err","run","$templateCache","put","config","$locationProvider","$routeProvider","localStorageServiceProvider","setPrefix","hashPrefix","when","template","otherwise","service","$http","localStorageService","margeData","data","departments","employees","photos","forEach","employee","photoId","photo","_","findWhere","id","department","departmentId","employeeData","this","getData","callback","getDataThroughHttp","get","then","response","isSupported","set","component","templateUrl","controller","$scope","self","departmentList","$routeParams","employeeId","getPhoto","setEmployee","employeeList","setEmployeeList","setDepartment","where"],"mappings":"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","file":"main-e947f46efc.js","sourcesContent":["//HEAD \n(function(app) {\ntry { app = angular.module(\"employeeTemplates\"); }\ncatch(err) { app = angular.module(\"employeeTemplates\", []); }\napp.run([\"$templateCache\", function($templateCache) {\n\"use strict\";\n\n$templateCache.put(\"js/department/departmentList.template.html\",\"\\n\" +\n    \"<div class=\\\"page-header jumbotron\\\">\\n\" +\n    \"    <h1>Отделы</h1>\\n\" +\n    \"</div>\\n\" +\n    \"\\n\" +\n    \"<div class=\\\"employee-catalog container\\\">\\n\" +\n    \"    <ul>\\n\" +\n    \"        <li class=\\\"col-lg-3 col-md-4 col-sm-6\\\" ng-repeat=\\\"department in $ctrl.departmentList\\\">\\n\" +\n    \"            <a class=\\\"department-button\\\" href=\\\"#!/departments/{{department.id}}/employees\\\">\\n\" +\n    \"                <span>{{department.name}}</span>\\n\" +\n    \"            </a>\\n\" +\n    \"        </li>\\n\" +\n    \"    </ul>\\n\" +\n    \"</div>\\n\" +\n    \"<footer class=\\\"footer\\\">\\n\" +\n    \"</footer>\")\n\n$templateCache.put(\"js/employee/employee.template.html\",\"\\n\" +\n    \"\\n\" +\n    \"\\n\" +\n    \"<div class=\\\"page-header jumbotron\\\">\\n\" +\n    \"    <h1>Сотрудник</h1>\\n\" +\n    \"</div>\\n\" +\n    \"\\n\" +\n    \"<div class=\\\"employee-navbar\\\">\\n\" +\n    \"    <nav class=\\\"navbar navbar-default container employee-navbar\\\">\\n\" +\n    \"        <div class=\\\"container-fluid\\\">\\n\" +\n    \"            <a class=\\\"navbar-brand\\\" href=\\\"#!/departments/\\\">\\n\" +\n    \"                Отделы\\n\" +\n    \"            </a>\\n\" +\n    \"            <a class=\\\"navbar-brand\\\" href=\\\"#!/departments/{{$ctrl.employee.department.id}}/employees\\\">\\n\" +\n    \"                {{$ctrl.employee.department.name}}\\n\" +\n    \"            </a>\\n\" +\n    \"        </div>\\n\" +\n    \"    </nav>\\n\" +\n    \"</div>\\n\" +\n    \"\\n\" +\n    \"<div class=\\\"employee-catalog container\\\">\\n\" +\n    \"    <div class=\\\"media employee-item\\\">\\n\" +\n    \"        <div class=\\\"media-left\\\">\\n\" +\n    \"            <img class=\\\"avatar-image\\\" data-ng-src=\\\"{{ $ctrl.employee.photo }}\\\">\\n\" +\n    \"        </div>\\n\" +\n    \"        <div class=\\\"media-body\\\">\\n\" +\n    \"            <h4>{{ $ctrl.employee.name }}</h4>\\n\" +\n    \"            <p>\\n\" +\n    \"                <span class=\\\"field-hint\\\">Телефон:</span> {{ $ctrl.employee.phone }}\\n\" +\n    \"            </p>\\n\" +\n    \"            <p>\\n\" +\n    \"                <span class=\\\"field-hint\\\">Отдел:</span> {{ $ctrl.employee.department.name }}\\n\" +\n    \"            </p>\\n\" +\n    \"        </div>\\n\" +\n    \"    </div>\\n\" +\n    \"</div>\\n\" +\n    \"<footer class=\\\"footer\\\">\\n\" +\n    \"</footer>\\n\" +\n    \"\\n\" +\n    \"\")\n\n$templateCache.put(\"js/employee/employeeList.template.html\",\"\\n\" +\n    \"<div class=\\\"page-header jumbotron\\\">\\n\" +\n    \"    <h1>Сотрудники</h1>\\n\" +\n    \"    <h2>отдела «{{$ctrl.department.name}}»</h2>\\n\" +\n    \"</div>\\n\" +\n    \"\\n\" +\n    \"<div class=\\\"employee-navbar\\\">\\n\" +\n    \"    <nav class=\\\"navbar navbar-default container employee-navbar\\\">\\n\" +\n    \"        <div class=\\\"container-fluid\\\">\\n\" +\n    \"            <a class=\\\"navbar-brand\\\" href=\\\"#!/departments/\\\">Отделы</a>\\n\" +\n    \"        </div>\\n\" +\n    \"    </nav>\\n\" +\n    \"</div>\\n\" +\n    \"\\n\" +\n    \"<div class=\\\"employee-catalog container\\\">\\n\" +\n    \"    <h3 class=\\\"official-info-header\\\" ng-if=\\\"!$ctrl.employeeList.length\\\">Отдел пуст</h3>\\n\" +\n    \"    <ul>\\n\" +\n    \"        <li class=\\\"media employee-item col-lg-4 col-md-6 col-sm-6\\\" ng-repeat=\\\"employee in $ctrl.employeeList\\\">\\n\" +\n    \"            <!-- <div alt=\\\"{{employee.name}}\\\"\\n\" +\n    \"                 style=\\\"width: 150px; height:150px;\\\"\\n\" +\n    \"                 ng-style=\\\"{'background-image' : 'url(\\\\'' + employee.photo.data + '\\\\')'}\\\">\\n\" +\n    \"            </div> -->\\n\" +\n    \"            <div class=\\\"media-left\\\">\\n\" +\n    \"                <a href=\\\"#!/employees/{{employee.id}}\\\">\\n\" +\n    \"                    <img class=\\\"avatar-image\\\" data-ng-src=\\\"{{employee.photo}}\\\">\\n\" +\n    \"                </a>\\n\" +\n    \"            </div>\\n\" +\n    \"            <div class=\\\"media-body\\\">\\n\" +\n    \"                <h4>{{employee.name}}</h4>\\n\" +\n    \"                <p>\\n\" +\n    \"                    <span class=\\\"field-hint\\\">Телефон:</span> {{employee.phone}}\\n\" +\n    \"                </p>\\n\" +\n    \"            </div>\\n\" +\n    \"            <div class=\\\"media-right\\\">\\n\" +\n    \"                <a href=\\\"#!/employees/{{employee.id}}\\\"\\n\" +\n    \"                   class=\\\"btn btn-default pull-right\\\" >\\n\" +\n    \"                    <div class=\\\"glyphicon glyphicon-file\\\"></div>\\n\" +\n    \"                </a>\\n\" +\n    \"            </div>\\n\" +\n    \"        </li>\\n\" +\n    \"    </ul>\\n\" +\n    \"</div>\\n\" +\n    \"<footer class=\\\"footer\\\">\\n\" +\n    \"</footer>\")\n}]);\n})();","\r\nangular.module('employeeCatalog', [\r\n    'ngAnimate',\r\n    'employeeTemplates',\r\n    'LocalStorageModule',\r\n    'ngRoute',\r\n    'departmentList',\r\n    'employeeList',\r\n    'employee'\r\n]);\r\n","\r\n\r\nangular.\r\n    module('employeeCatalog').\r\n    config(['$locationProvider', '$routeProvider', 'localStorageServiceProvider',\r\n        function config ($locationProvider, $routeProvider, localStorageServiceProvider) {\r\n\r\n            localStorageServiceProvider.setPrefix('employeeCatalog');\r\n\r\n            $locationProvider.hashPrefix('!');\r\n            /*\r\n                $locationProvider.html5Mode({\r\n                    enabled : true,\r\n                    requiredBase : false\r\n                });\r\n            */\r\n\r\n            $routeProvider\r\n                .when('/departments', {\r\n                    template : '<department-list></department-list>'\r\n                })\r\n                .when('/departments/:departmentId/employees', {\r\n                    template : '<employee-list></employee-list>'\r\n                })\r\n                .when('/employees/:employeeId', {\r\n                    template : '<employee></employee>'\r\n                })\r\n                .otherwise('/departments');\r\n\r\n        }]);","\r\n\r\nangular\r\n    .module('employeeCatalog')\r\n    .service('employeeData', ['$http', 'localStorageService', function ($http, localStorageService) {\r\n        var data,\r\n            employeeData,\r\n            callbacks = [];\r\n\r\n        function margeData (data) {\r\n            var departments = data.departments,\r\n                employees   = data.employees,\r\n                photos      = data.photos;\r\n\r\n            employees.forEach(function (employee) {\r\n                var photoId = employee.photo,\r\n                    photo   = _.findWhere(photos, {\r\n                            'id' : photoId\r\n                        }) || {},\r\n                    department = _.findWhere(departments, {\r\n                            'id' : employee.department\r\n                        }) || {};\r\n\r\n                employee.photo        = photo['data'] || null;\r\n                employee.department   = department || null;\r\n                employee.departmentId = department.id || null;\r\n            });\r\n\r\n            return data;\r\n        }\r\n\r\n\r\n        this.getData = function (callback) {\r\n            if (employeeData) {\r\n                callback(employeeData);\r\n            } else if (localStorageService.isSupported) {\r\n                employeeData = localStorageService.get('employeeData');\r\n                if (employeeData) {\r\n                    employeeData = margeData(employeeData);\r\n                    callback(employeeData);\r\n                } else {\r\n                    getDataThroughHttp();\r\n                }\r\n            } else {\r\n                getDataThroughHttp();\r\n            }\r\n\r\n            function getDataThroughHttp () {\r\n                $http.get('./data.json')\r\n                    .then(function (response) {\r\n                        employeeData = response.data;\r\n                        if (localStorageService.isSupported) {\r\n                            localStorageService.set('employeeData', employeeData);\r\n                        }\r\n                        employeeData = margeData(employeeData);\r\n                        callback(employeeData);\r\n                    });\r\n            }\r\n        };\r\n\r\n    }]);","\r\n\r\nangular\r\n    .module('departmentList', []);","\r\n\r\nangular\r\n    .module('departmentList')\r\n    .component('departmentList', {\r\n        'templateUrl' : 'js/department/departmentList.template.html',\r\n        'controller' : ['employeeData', '$scope', function (employeeData, $scope) {\r\n            var self = this;\r\n            this.departmentList = [];\r\n            employeeData.getData(function (data) {\r\n                self.departmentList = data.departments;\r\n                // $scope.$apply();\r\n            });\r\n        }]\r\n    });","\r\nangular.module('employee', []);\r\n","\r\n\r\nangular\r\n    .module('employee')\r\n    .component('employee', {\r\n        'templateUrl' : 'js/employee/employee.template.html',\r\n        'controller' : ['employeeData', '$scope', '$routeParams', function (employeeData, $scope, $routeParams) {\r\n            var self       = this,\r\n                employeeId = $routeParams.employeeId;\r\n\r\n            this.employee = null;\r\n            this.getPhoto = function () {\r\n                return this.employee.photo.data;\r\n            };\r\n            this.setEmployee = function (employee) {\r\n                this.employee = employee;\r\n            };\r\n            employeeData.getData(function (data) {\r\n                self.setEmployee(_.findWhere(data.employees, {\r\n                    'id' : employeeId\r\n                }));\r\n            });\r\n        }]\r\n    });","\r\nangular.module('employeeList', []);\r\n","\r\n\r\nangular\r\n    .module('employeeList')\r\n    .component('employeeList', {\r\n        'templateUrl' : 'js/employee/employeeList.template.html',\r\n        'controller'  : ['employeeData', '$scope', '$routeParams', function (employeeData, $scope, $routeParams) {\r\n            var self         = this,\r\n                departmentId = $routeParams.departmentId;\r\n\r\n            this.department   = {};\r\n            this.employeeList = [];\r\n            this.setEmployeeList = function (employeeList) {\r\n                this.employeeList = employeeList;\r\n            };\r\n            this.setDepartment = function (department) {\r\n                this.department = department;\r\n            };\r\n            employeeData.getData(function (data) {\r\n                self.setEmployeeList(_.where(data.employees, {\r\n                    'departmentId' : departmentId\r\n                }));\r\n                self.setDepartment(_.findWhere(data.departments, {\r\n                    'id' : departmentId\r\n                }));\r\n            });\r\n        }]\r\n    });"],"sourceRoot":"/source/"}